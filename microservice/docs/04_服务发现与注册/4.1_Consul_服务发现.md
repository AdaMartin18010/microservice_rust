# 4.1 Consul 服务发现

## 📋 目录

- [4.1 Consul 服务发现](#41-consul-服务发现)
  - [📋 目录](#-目录)
  - [4.1.1 能力与组件](#411-能力与组件)
  - [4.1.2 Rust 集成要点](#412-rust-集成要点)
  - [4.1.3 最佳实践](#413-最佳实践)

Consul 提供服务注册/发现、健康检查、KV 配置等能力，适用于多数据中心与零信任网络。

## 4.1.1 能力与组件

- Catalog/Health：服务注册与健康探测；
- KV：配置与特性开关；
- Connect：内置服务网格（mTLS）。

## 4.1.2 Rust 集成要点

- 使用 HTTP API/官方或社区 SDK 进行注册/心跳；
- 在本仓的 `ServiceRegistry` 之上适配 Consul 作为后端存储；
- 健康检查：HTTP/TCP/脚本，建议以 HTTP + liveness/readiness 区分。

## 4.1.3 最佳实践

- Sidecar 方式托管 mTLS 与授权；
- 使用标签（tags）承载版本/环境/可用区信息；
- Watch/Blocking Queries 做到事件驱动更新本地缓存。
