# 9.6 供应链安全 与 CI/CD 集成流水线（SBOM/SLSA/Cosign）

> 将 SBOM 生成/验证、签名与策略执行纳入标准流水线，支撑零信任与合规。

## 9.6.1 基线流程

1. 依赖扫描：RustSec/Cargo Audit
2. SBOM 生成：`syft` 产出 SPDX/CycloneDX
3. 安全构建：可复现构建 + 最小镜像（distroless）
4. 镜像签名：`cosign sign` 并推送签名
5. 策略门禁：`conftest`/`OPA` 校验 SBOM 与签名
6. 供应链级别：SLSA Level 2→3 路线

## 9.6.2 参考命令

```bash
cargo audit --json > target/audit.json
syft packages dir:. -o cyclonedx-json > target/sbom.json
cosign sign --key $COSIGN_KEY $IMAGE
cosign verify --key $COSIGN_PUB $IMAGE
```

## 9.6.3 与 CI/CD 集成

- GitHub Actions / GitLab CI / Jenkinsfile 阶段化：scan → sbom → build → sign → policy
- 部署前门禁：仅允许通过签名与策略校验的镜像进入 `env/prod`

## 9.6.4 关联阅读

- `10.4` CI/CD 持续集成部署
- `13.8` 零信任安全架构
- `14.12` 端到端生产基线·落地索引

---
最后更新：2025-09-25
