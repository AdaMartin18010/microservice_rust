# 10.1 配置管理策略

## 10.1.1 原则

- 配置即代码（GitOps）、分环境/分租户隔离；
- 动态热更新与回滚开关；
- 安全：敏感配置密文存储（Vault/KMS）。

## 10.1.2 实践

- 分层：默认值 → 环境变量 → 远程配置中心（Consul/Nacos/etcd）；
- 以版本/标签管理发布；
- 观测：配置变更事件上报与审计。

## 10.1.3 供应链与策略（SBOM/签名/准入）

- SBOM 生成：`syft packages dir:. -o json > sbom.json`；
- 镜像签名：`cosign sign ghcr.io/acme/microservice:TAG --yes`；
- 准入策略：`policy-as-code`（Kyverno/OPA Gatekeeper）校验镜像签名与基础镜像来源；
- 拉取策略：仅允许受信仓库与带签名的镜像；
- 运行策略：非 root/只读根文件系统/能力裁剪。
